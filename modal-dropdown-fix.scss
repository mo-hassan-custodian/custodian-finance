/* Global CSS Fix for Angular Material Dropdowns in ng-bootstrap Modals */
/* Add this to your global styles.scss file */

/* Fix z-index issues with Angular Material overlays in modals */
.cdk-overlay-container {
  z-index: 2000 !important; /* Higher than ng-bootstrap modal backdrop (1050) */
}

.cdk-overlay-backdrop {
  z-index: 1999 !important;
}

.cdk-overlay-pane {
  z-index: 2001 !important;
}

/* Specific fixes for mat-select panels */
.mat-select-panel {
  z-index: 2002 !important;
  max-height: 256px !important;
}

/* Fix for datepicker overlays */
.mat-datepicker-popup {
  z-index: 2003 !important;
}

.mat-datepicker-content {
  z-index: 2004 !important;
}

/* Ensure proper positioning */
.mat-select-panel-wrap {
  transform-origin: center top !important;
}

/* Fix for overlay backdrop positioning in modals */
.modal-open .cdk-overlay-backdrop {
  position: fixed !important;
}

/* Prevent dropdown from appearing after modal close */
.modal.fade:not(.show) ~ .cdk-overlay-container {
  display: none !important;
}

/* Additional fix for ng-bootstrap modal + Angular Material interaction */
.modal-backdrop ~ .cdk-overlay-container {
  z-index: 2000 !important;
}

/* Fix for select arrow positioning */
.mat-select-arrow-wrapper {
  transform: translateY(-50%) !important;
}

/* Ensure dropdowns don't interfere with modal scrolling */
.modal-body {
  position: relative;
  z-index: 1;
}

.modal-body .mat-form-field.mat-focused {
  z-index: 10;
}

/* Fix for option group styling in modals */
.mat-select-panel .mat-optgroup-label {
  position: sticky;
  top: 0;
  background: white;
  z-index: 1;
}

/* Prevent text selection issues */
.cdk-overlay-pane {
  user-select: none;
}

/* Fix for touch devices */
@media (hover: none) and (pointer: coarse) {
  .mat-select-panel {
    max-height: 200px !important;
  }
}

/* Animation fixes */
.mat-select-panel {
  animation-duration: 150ms !important;
}

.cdk-overlay-backdrop {
  animation-duration: 150ms !important;
}

/* Ensure proper cleanup */
.cdk-overlay-container:empty {
  display: none !important;
}

/* Fix for multiple modals scenario */
.modal:nth-of-type(2) ~ .cdk-overlay-container {
  z-index: 2100 !important;
}

/* Debug helper - uncomment to see overlay boundaries */
/*
.cdk-overlay-pane {
  border: 2px solid red !important;
}

.cdk-overlay-backdrop {
  background: rgba(255, 0, 0, 0.1) !important;
}
*/
